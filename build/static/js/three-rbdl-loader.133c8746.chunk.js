"use strict";(self.webpackChunkwedding=self.webpackChunkwedding||[]).push([[457],{5171:function(r,e,a){a.r(e),a.d(e,{RGBELoader:function(){return f}});var t=a(5671),n=a(3144),i=a(1752),o=a(1120),s=a(136),l=a(9388),u=a(9655),f=function(r){(0,s.Z)(a,r);var e=(0,l.Z)(a);function a(r){var n;return(0,t.Z)(this,a),(n=e.call(this,r)).type=u.cLu,n}return(0,n.Z)(a,[{key:"parse",value:function(r){var e=function(r,e){switch(r){case 1:console.error("THREE.RGBELoader Read Error: "+(e||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(e||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(e||""));break;default:console.error("THREE.RGBELoader: Error: "+(e||""))}return-1},a=function(r,e,a){e=e||1024;for(var t=r.pos,n=-1,i=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(r.subarray(t,t+128)));0>(n=s.indexOf("\n"))&&i<e&&t<r.byteLength;)o+=s,i+=s.length,t+=128,s+=String.fromCharCode.apply(null,new Uint16Array(r.subarray(t,t+128)));return-1<n&&(!1!==a&&(r.pos+=i+n+1),o+s.slice(0,n))},t=function(r,e,a,t){var n=r[e+3],i=Math.pow(2,n-128)/255;a[t+0]=r[e+0]*i,a[t+1]=r[e+1]*i,a[t+2]=r[e+2]*i,a[t+3]=1},n=function(r,e,a,t){var n=r[e+3],i=Math.pow(2,n-128)/255;a[t+0]=u.A5E.toHalfFloat(Math.min(r[e+0]*i,65504)),a[t+1]=u.A5E.toHalfFloat(Math.min(r[e+1]*i,65504)),a[t+2]=u.A5E.toHalfFloat(Math.min(r[e+2]*i,65504)),a[t+3]=u.A5E.toHalfFloat(1)},i=new Uint8Array(r);i.pos=0;var o=function(r){var t,n,i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(r.pos>=r.byteLength||!(t=a(r)))return e(1,"no header found");if(!(n=t.match(/^#\?(\S+)/)))return e(3,"bad initial token");for(u.valid|=1,u.programtype=n[1],u.string+=t+"\n";!1!==(t=a(r));)if(u.string+=t+"\n","#"!==t.charAt(0)){if((n=t.match(i))&&(u.gamma=parseFloat(n[1])),(n=t.match(o))&&(u.exposure=parseFloat(n[1])),(n=t.match(s))&&(u.valid|=2,u.format=n[1]),(n=t.match(l))&&(u.valid|=4,u.height=parseInt(n[1],10),u.width=parseInt(n[2],10)),2&u.valid&&4&u.valid)break}else u.comments+=t+"\n";return 2&u.valid?4&u.valid?u:e(3,"missing image size specifier"):e(3,"missing format specifier")}(i);if(-1!==o){var s=o.width,l=o.height,f=function(r,a,t){var n=a;if(n<8||n>32767||2!==r[0]||2!==r[1]||128&r[2])return new Uint8Array(r);if(n!==(r[2]<<8|r[3]))return e(3,"wrong scanline width");var i=new Uint8Array(4*a*t);if(!i.length)return e(4,"unable to allocate buffer space");for(var o=0,s=0,l=4*n,u=new Uint8Array(4),f=new Uint8Array(l),c=t;c>0&&s<r.byteLength;){if(s+4>r.byteLength)return e(1);if(u[0]=r[s++],u[1]=r[s++],u[2]=r[s++],u[3]=r[s++],2!=u[0]||2!=u[1]||(u[2]<<8|u[3])!=n)return e(3,"bad rgbe scanline format");for(var h=0,d=void 0;h<l&&s<r.byteLength;){var p=(d=r[s++])>128;if(p&&(d-=128),0===d||h+d>l)return e(3,"bad scanline data");if(p)for(var m=r[s++],g=0;g<d;g++)f[h++]=m;else f.set(r.subarray(s,s+d),h),h+=d,s+=d}for(var y=n,v=0;v<y;v++){var w=0;i[o]=f[v+w],w+=n,i[o+1]=f[v+w],w+=n,i[o+2]=f[v+w],w+=n,i[o+3]=f[v+w],o+=4}c--}return i}(i.subarray(i.pos),s,l);if(-1!==f){var c,h,d;switch(this.type){case u.VzW:d=f.length/4;for(var p=new Float32Array(4*d),m=0;m<d;m++)t(f,4*m,p,4*m);c=p,h=u.VzW;break;case u.cLu:d=f.length/4;for(var g=new Uint16Array(4*d),y=0;y<d;y++)n(f,4*y,g,4*y);c=g,h=u.cLu;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:s,height:l,data:c,header:o.string,gamma:o.gamma,exposure:o.exposure,type:h}}}return null}},{key:"setDataType",value:function(r){return this.type=r,this}},{key:"load",value:function(r,e,t,n){return(0,i.Z)((0,o.Z)(a.prototype),"load",this).call(this,r,(function(r,a){switch(r.type){case u.VzW:case u.cLu:r.encoding=u.rnI,r.minFilter=u.wem,r.magFilter=u.wem,r.generateMipmaps=!1,r.flipY=!0}e&&e(r,a)}),t,n)}}]),a}(u.yxD)}}]);
//# sourceMappingURL=three-rbdl-loader.133c8746.chunk.js.map